!function(a){"use strict";angular.module("firebase",[]).value("Firebase",a.Firebase).value("firebaseBatchDelay",50)}(window),function(){"use strict";angular.module("firebase").factory("$FirebaseArray",["$log","$firebaseUtils",function(a,b){function c(a,b){return this._observers=[],this._events=[],this._list=[],this._inst=a,this._promise=this._init(),this._destroyFn=b,this._list}return c.prototype={$add:function(a){return this.$inst().$push(a)},$save:function(a){var c=this._resolveItem(a),d=this.$keyAt(c);return null!==d?this.$inst().$set(d,b.toJSON(c)):b.reject("Invalid record; could determine its key: "+a)},$remove:function(a){var c=this.$keyAt(a);return null!==c?this.$inst().$remove(this.$keyAt(a)):b.reject("Invalid record; could not find key: "+a)},$keyAt:function(a){var b=this._resolveItem(a);return angular.isUndefined(b)||angular.isUndefined(b.$id)?null:b.$id},$indexFor:function(a){return this._list.findIndex(function(b){return b.$id===a})},$loaded:function(){var a=this._promise;return arguments.length&&(a=a.then.apply(a,arguments)),a},$inst:function(){return this._inst},$watch:function(a,b){var c=this._observers;return c.push([a,b]),function(){var d=c.findIndex(function(c){return c[0]===a&&c[1]===b});d>-1&&c.splice(d,1)}},$destroy:function(){this._isDestroyed||(this._isDestroyed=!0,this._list.length=0,a.debug("destroy called for FirebaseArray: "+this.$inst().$ref().toString()),this._destroyFn())},$$added:function(a,b){var c=this.$indexFor(a.name());if(c>-1)this.$$moved(a,b),this.$$updated(a,b);else{var d=this.$createObject(a);this._addAfter(d,b),this.$notify("child_added",a.name(),b)}},$$removed:function(a){var b=this._spliceOut(a.name());angular.isDefined(b)&&this.$notify("child_removed",a.name())},$$updated:function(a){var c=this.$indexFor(a.name());if(c>=0){var d=b.toJSON(this._list[c]);b.updateRec(this._list[c],a),angular.equals(d,b.toJSON(this._list[c]))||this.$notify("child_changed",a.name())}},$$moved:function(a,b){var c=this._spliceOut(a.name());angular.isDefined(c)&&(this._addAfter(c,b),this.$notify("child_moved",a.name(),b))},$$error:function(b){a.error(b),this.$destroy(b)},$createObject:function(a){var b=a.val();return angular.isObject(b)||(b={$value:b}),b.$id=a.name(),b.$priority=a.getPriority(),b},$notify:function(a,b,c){var d={event:a,key:b};3===arguments.length&&(d.prevChild=c),angular.forEach(this._observers,function(a){a[0].call(a[1],d)})},_addAfter:function(a,b){var c;null===b?c=0:(c=this.$indexFor(b)+1,0===c&&(c=this._list.length)),this._list.splice(c,0,a)},_spliceOut:function(a){var b=this.$indexFor(a);return b>-1?this._list.splice(b,1)[0]:void 0},_resolveItem:function(a){return angular.isNumber(a)?this._list[a]:a},_init:function(){var a=this,c=a._list,d=b.defer(),e=a.$inst().$ref();return b.getPublicMethods(a,function(b,d){c[d]=b.bind(a)}),e.once("value",function(){b.compile(function(){a._isDestroyed?d.reject("instance was destroyed before load completed"):d.resolve(c)})},d.reject.bind(d)),d.promise}},c.$extendFactory=function(a,d){return 1===arguments.length&&angular.isObject(a)&&(d=a,a=function(){return c.apply(this,arguments)}),b.inherit(a,c,d)},c}])}(),function(){"use strict";angular.module("firebase").factory("$FirebaseObject",["$parse","$firebaseUtils","$log",function(a,b,c){function d(a,c){var d=this,e=b.defer();d.$$conf={promise:e.promise,inst:a,bound:null,destroyFn:c,listeners:[],updated:function(){d.$$conf.bound&&d.$$conf.bound.update(),angular.forEach(d.$$conf.listeners,function(a){a[0].call(a[1],{event:"updated",key:d.$id})})}},d.$id=a.$ref().name(),d.$data={},d.$priority=null,d.$$conf.inst.$ref().once("value",function(){b.compile(e.resolve.bind(e,d))},function(a){b.compile(e.reject.bind(e,a))})}return d.prototype={$save:function(){return this.$inst().$set(b.toJSON(this))},$loaded:function(){var a=this.$$conf.promise;return arguments.length&&(a=a.then.apply(a,arguments)),a},$inst:function(){return this.$$conf.inst},$bindTo:function(c,d){var e=this;return e.$loaded().then(function(){if(e.$$conf.bound)throw new Error("Can only bind to one scope variable at a time");var f=function(){e.$$conf.bound&&(e.$$conf.bound=null,i())},g=a(d),h=e.$$conf.bound={update:function(){var a=h.get();angular.isObject(a)||(a={}),b.each(e,function(b,c){a[c]=b}),a.$id=e.$id,a.$priority=e.$priority,e.hasOwnProperty("$value")&&(a.$value=e.$value),g.assign(c,a)},get:function(){return g(c)},unbind:f};h.update(),c.$on("$destroy",h.unbind);var i=c.$watch(d,function(){var a=b.toJSON(h.get()),c=b.toJSON(e);angular.equals(a,c)||e.$inst().$set(a)},!0);return f})},$watch:function(a,b){var c=this.$$conf.listeners;return c.push([a,b]),function(){var d=c.findIndex(function(c){return c[0]===a&&c[1]===b});d>-1&&c.splice(d,1)}},$destroy:function(){var a=this;a.$isDestroyed||(a.$isDestroyed=!0,a.$$conf.destroyFn(),a.$$conf.bound&&a.$$conf.bound.unbind(),b.each(a,function(b,c){delete a[c]}))},$$updated:function(a){this.$id=a.name(),b.updateRec(this,a),this.$$conf.updated()},$$error:function(a){c.error(a),this.$destroy()}},d.$extendFactory=function(a,c){return 1===arguments.length&&angular.isObject(a)&&(c=a,a=function(){d.apply(this,arguments)}),b.inherit(a,d,c)},d}])}(),function(){"use strict";angular.module("firebase").factory("$firebase",["$firebaseUtils","$firebaseConfig",function(a,b){function c(a,d){return this instanceof c?(this._config=b(d),this._ref=a,this._arraySync=null,this._objectSync=null,void this._assertValidConfig(a,this._config)):new c(a,d)}function d(b,c){function d(){m.isDestroyed=!0;var a=b.$ref();a.off("child_added",h),a.off("child_moved",j),a.off("child_changed",i),a.off("child_removed",k),f=null}function e(){var a=b.$ref();a.on("child_added",h,l),a.on("child_moved",j,l),a.on("child_changed",i,l),a.on("child_removed",k,l)}var f=new c(b,d),g=a.batch(),h=g(f.$$added,f),i=g(f.$$updated,f),j=g(f.$$moved,f),k=g(f.$$removed,f),l=g(f.$$error,f),m=this;m.isDestroyed=!1,m.getArray=function(){return f},e()}function e(b,c){function d(){k.isDestroyed=!0,g.off("value",i),f=null}function e(){g.on("value",i,j)}var f=new c(b,d),g=b.$ref(),h=a.batch(),i=h(f.$$updated,f),j=h(f.$$error,f),k=this;k.isDestroyed=!1,k.getObject=function(){return f},e()}return c.prototype={$ref:function(){return this._ref},$push:function(b){var c=a.defer(),d=this._ref.ref().push(),e=this._handle(c,d);return arguments.length>0?d.set(b,e):e(),c.promise},$set:function(b,c){var d=this._ref.ref(),e=a.defer();return arguments.length>1?d=d.child(b):c=b,d.set(c,this._handle(e,d)),e.promise},$remove:function(b){var c=this._ref.ref(),d=a.defer();return arguments.length>0&&(c=c.child(b)),c.remove(this._handle(d,c)),d.promise},$update:function(b,c){var d=this._ref.ref(),e=a.defer();return arguments.length>1?d=d.child(b):c=b,d.update(c,this._handle(e,d)),e.promise},$transaction:function(b,c,d){var e=this._ref.ref();angular.isFunction(b)?(d=c,c=b):e=e.child(b),angular.isUndefined(d)&&(d=!1);var f=a.defer();return e.transaction(c,function(a,b,c){a?f.reject(a):f.resolve(b?c:null)},d),f.promise},$asObject:function(){return(!this._objectSync||this._objectSync.isDestroyed)&&(this._objectSync=new e(this,this._config.objectFactory)),this._objectSync.getObject()},$asArray:function(){return(!this._arraySync||this._arraySync.isDestroyed)&&(this._arraySync=new d(this,this._config.arrayFactory)),this._arraySync.getArray()},_handle:function(a){var b=Array.prototype.slice.call(arguments,1);return function(c){c?a.reject(c):a.resolve.apply(a,b)}},_assertValidConfig:function(b,c){if(a.assertValidRef(b,"Must pass a valid Firebase reference to $firebase (not a string or URL)"),!angular.isFunction(c.arrayFactory))throw new Error("config.arrayFactory must be a valid function");if(!angular.isFunction(c.objectFactory))throw new Error("config.arrayFactory must be a valid function")}},c}])}(),function(){"use strict";var a;angular.module("firebase").factory("$firebaseSimpleLogin",["$q","$timeout","$rootScope",function(b,c,d){return function(e){var f=new a(b,c,d,e);return f.construct()}}]),a=function(a,b,c,d){if(this._q=a,this._timeout=b,this._rootScope=c,this._loginDeferred=null,this._getCurrentUserDeferred=[],this._currentUserData=void 0,"string"==typeof d)throw new Error("Please provide a Firebase reference instead of a URL, eg: new Firebase(url)");this._fRef=d},a.prototype={construct:function(){var a={user:null,$login:this.login.bind(this),$logout:this.logout.bind(this),$createUser:this.createUser.bind(this),$changePassword:this.changePassword.bind(this),$removeUser:this.removeUser.bind(this),$getCurrentUser:this.getCurrentUser.bind(this),$sendPasswordResetEmail:this.sendPasswordResetEmail.bind(this)};if(this._object=a,!window.FirebaseSimpleLogin){var b=new Error("FirebaseSimpleLogin is undefined. Did you forget to include firebase-simple-login.js?");throw this._rootScope.$broadcast("$firebaseSimpleLogin:error",b),b}var c=new FirebaseSimpleLogin(this._fRef,this._onLoginEvent.bind(this));return this._authClient=c,this._object},login:function(a,b){var c=this._q.defer(),d=this;return this.getCurrentUser().then(function(){d._loginDeferred=c,d._authClient.login(a,b)}),c.promise},logout:function(){this._authClient.logout(),delete this._currentUserData},createUser:function(a,b){var c=this,d=this._q.defer();return c._authClient.createUser(a,b,function(a,b){a?(c._rootScope.$broadcast("$firebaseSimpleLogin:error",a),d.reject(a)):d.resolve(b)}),d.promise},changePassword:function(a,b,c){var d=this,e=this._q.defer();return d._authClient.changePassword(a,b,c,function(a){a?(d._rootScope.$broadcast("$firebaseSimpleLogin:error",a),e.reject(a)):e.resolve()}),e.promise},getCurrentUser:function(){var a=this,b=this._q.defer();return void 0!==a._currentUserData?b.resolve(a._currentUserData):a._getCurrentUserDeferred.push(b),b.promise},removeUser:function(a,b){var c=this,d=this._q.defer();return c._authClient.removeUser(a,b,function(a){a?(c._rootScope.$broadcast("$firebaseSimpleLogin:error",a),d.reject(a)):d.resolve()}),d.promise},sendPasswordResetEmail:function(a){var b=this,c=this._q.defer();return b._authClient.sendPasswordResetEmail(a,function(a){a?(b._rootScope.$broadcast("$firebaseSimpleLogin:error",a),c.reject(a)):c.resolve()}),c.promise},_onLoginEvent:function(a,b){if(this._currentUserData!==b||null!==a){var c=this;a?(c._loginDeferred&&(c._loginDeferred.reject(a),c._loginDeferred=null),c._rootScope.$broadcast("$firebaseSimpleLogin:error",a)):(this._currentUserData=b,c._timeout(function(){for(c._object.user=b,b?c._rootScope.$broadcast("$firebaseSimpleLogin:login",b):c._rootScope.$broadcast("$firebaseSimpleLogin:logout"),c._loginDeferred&&(c._loginDeferred.resolve(b),c._loginDeferred=null);c._getCurrentUserDeferred.length>0;){var a=c._getCurrentUserDeferred.pop();a.resolve(b)}}))}}}}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError("'this' is null or not defined");var c=this.length>>>0;for(b=+b||0,1/0===Math.abs(b)&&(b=0),0>b&&(b+=c,0>b&&(b=0));c>b;b++)if(this[b]===a)return b;return-1}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(a){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(f in c&&(b=c[f],a.call(e,b,f,c)))return f;return-1}}),"function"!=typeof Object.create&&!function(){var a=function(){};Object.create=function(b){if(arguments.length>1)throw new Error("Second argument not supported");if(null===b)throw new Error("Cannot set a null [[Prototype]]");if("object"!=typeof b)throw new TypeError("Argument must be an object");return a.prototype=b,new a}}(),Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(a){return a.__proto__}:function(a){return a.constructor.prototype}),function(){"use strict";angular.module("firebase").factory("$firebaseConfig",["$FirebaseArray","$FirebaseObject",function(a,b){return function(c){return angular.extend({arrayFactory:a,objectFactory:b},c)}}]).factory("$firebaseUtils",["$q","$timeout","firebaseBatchDelay",function(a,b,c){function d(a,b){function d(a,b){if("function"!=typeof a)throw new Error("Must provide a function to be batched. Got "+a);return function(){var c=Array.prototype.slice.call(arguments,0);i.push([a,b,c]),e()}}function e(){h&&clearTimeout(h),g&&Date.now()-g>b?k(f):(g||(g=Date.now()),h=k(f,a))}function f(){h=null,g=null;var a=i.slice(0);i=[],angular.forEach(a,function(a){a[0].apply(a[1],a[2])})}a||(a=angular.isDefined(a)?a:c),b||(b=10*a||100);var g,h,i=[];return d}function e(a,b){if(!angular.isObject(a)||"function"!=typeof a.ref||"function"!=typeof a.ref().transaction)throw new Error(b||"Invalid Firebase reference")}function f(a,b,c){var d=a.prototype;return a.prototype=Object.create(b.prototype),a.prototype.constructor=a,angular.forEach(Object.keys(d),function(b){a.prototype[b]=d[b]}),angular.isObject(c)&&angular.extend(a.prototype,c),a}function g(a,b,c){for(var d={},e=Object.getPrototypeOf({}),f=angular.isFunction(a)&&angular.isObject(a.prototype)?a.prototype:Object.getPrototypeOf(a);f&&f!==e;){for(var g in f)f.hasOwnProperty(g)&&!d.hasOwnProperty(g)&&(d[g]=!0,b.call(c,f[g],g,f));f=Object.getPrototypeOf(f)}}function h(a,b,c){g(a,function(a,d){"function"!=typeof a||/^_/.test(d)||b.call(c,a,d)})}function i(){return a.defer()}function j(a){var b=i();return b.reject(a),b.promise}function k(a,c){b(a||function(){},c||0)}function l(a,b){var c=b.val();return angular.isObject(c)||(c={$value:c}),delete a.$value,m(a,function(b,d){c.hasOwnProperty(d)||delete a[d]}),angular.extend(a,c),a.$priority=b.getPriority(),a}function m(a,b,c){angular.forEach(a,function(d,e){e.match(/^[_$]/)||b.call(c,d,e,a)})}function n(a){var b;return angular.isFunction(a.toJSON)?b=a.toJSON():a.hasOwnProperty("$value")?b={".value":a.$value}:(b={},m(a,function(a,c){b[c]=a})),a.hasOwnProperty("$priority")&&Object.keys(b).length>0&&(b[".priority"]=a.$priority),angular.forEach(b,function(a,b){if(b.match(/[.$\[\]#\/]/)&&".value"!==b&&".priority"!==b)throw new Error("Invalid key "+b+" (cannot contain .$[]#)");if(angular.isUndefined(a))throw new Error("Key "+b+" was undefined. Cannot pass undefined in JSON. Use null instead.")}),b}return{batch:d,compile:k,updateRec:l,assertValidRef:e,batchDelay:c,inherit:f,getPrototypeMethods:g,getPublicMethods:h,reject:j,defer:i,each:m,toJSON:n}}])}();